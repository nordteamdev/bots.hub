var BOT1 = new pBot('a53a1635f76d1130b63ef12cb00042d80918d251cb8891215b7baefb881d1f669b25c841fec91601e9881'); /////////////////////////////////////// ะฒะฒะตะดะธ ัะพะบะตะฝ, ัะตะฝะฟะฐะน!

function pBot(token) {
const request = require("request");



var vk = new ( require('vk-io') );
var fs = require('fs');

var admins = require('./admins.json');						// ะฐะดะผะธะฝั

var titlespam, textspam, pictures;

vk.setToken(token);
vk.longpoll.start();

vk.api.call('users.get')
.then((res) => {
console.log('[ะะฒัะพัะธะทะฐัะธั] ะฃัะฟะตัะฝะพ ะทะฐัะตะป ะฝะฐ ัััะฐะฝะธัั. ะะด: %s', res[0].id);
BOTS_ID.push(res[0].id);
})
console.log('coded by vk.com/darknetsu');


vk.longpoll.on('message', (message) => { //ััั ะธะดะตั ะฟัะพะฒะตัะบะฐ ะฝะฐ ัะพะพะฑัะตะฝะธะต, ั.ะต. ะตัะปะธ ะฟัะธััะปะฐะตััั ะฝะพะฒะพะต ัะพะพะฑัะตะฝะธะต ะธ ะธะดะตั ะฟัะพะฒะตัะบะฐ ะฝะฐ ะบะพะผะฐะฝะดั
//ััั ะผั ะผะพะถะตะผ ัะดะตะปะฐัั ะฝะตะบัั ะฟัะพะฒะตัะบั ะฝะฐ ะฑะฐะฝ, ะดัะผะฐะนัะต ัะฐะผะธ:)
let body = message.text.split(' ');
///////////////////////////////////////////////////////////////////////////////////////////// ััั ะผั ะฟะธัะตะผ top bot programme

//ะงัะพ-ะฑั ะฝะฐัะฐัั ะฟะธัะฐัั ะฝะพะฒัั ะบะพะผะฐะฝะดั, ะผั ะดะพะปะถะฝั ะฝะฐะฟะธัะฐัั: if(body[0] == 'ะบะพะผะฐะฝะดะฐ, ะฝะฐ ะบะพัะพััั ะฑัะดะตั ัะตะฐะณะธัะพะฒะฐัั ะฝะฐั programme bot') { }.
if(body[0] == '/help') {
	//ััะพะฑั ะฑะพั ัะผะพะณ ััะพ-ัะพ ะพัะฒะตัะธัั, ัะพ ะฝะฐะดะพ ะฝะฐะฟะธัะฐัั message.send(``); (ะผะพะถะฝะพ ัะทะฐัั ัะฐะบะธะต " ' ะบะพะฒััะบะธ, ะฝะพ ะผะฝะต ะฟะพ ะบะฐะนัั ัะฐะบะธะต.
	message.send(`
๐ ะัะพัะธะต ะบะพะผะฐะฝะดั ๐

๐ ะะพะผะฐะฝะดั ะบะปะฐะฝะพะฒ:
๐น ยป addclan - ัะพะทะดะฐัั ะบะปะฐะฝ.
๐น ยป khelp  - ะบะพะผะฐะฝะดั ะบะปะฐะฝะฐ.
๐น ยป ะะปะฐะฝั - ัะฟะธัะพะบ ะฒัะตั ะบะปะฐะฝะพะฒ.
๐น ยป ะะปะฐะฝ - ะะฝัะพ ะพ ะะฐัะตะผ ะบะปะฐะฝะต.

๐ ะะพะผะฐะฝะดั ะดะปั ัะตัะผ:
๐น ยป ะคะตัะผะฐ - ะะฝัะพ ะพ ะฒะฐัะตะน ัะตัะผะต.
๐น ยป ะคะตัะผั - ะะฟะธัะฐะฝะธะต ัะตัะผั.
๐น ยป ะัะฟะธัั ัะตัะผั - ะะพะบัะฟะบะฐ ะะฐะนะฝะคะตัะผั.
๐น ยป ะฃะปัััะธัั - ัะปัััะธัั ัะตัะผั.

๐ผ ะะพะผะฐะฝะดั ะดะปั ะบะตะนัะพะฒ:
๐น ยป ะะฐะณะฐะทะธะฝ - ะฒ ะฝะตะผ ะฟะพะบัะฟะฐัั ะบะตะนัั.
๐น ยป ะัะฟะธัั ID - ะบัะฟะธัั ัะพะฒะฐั.
๐น ยป ะะตะนัั - ัะฟะธัะพะบ ะบัะฟะปะตะฝะฝัั ะบะตะนัะพะฒ.
๐น ยป ะัะบัััั ID(ะบะตะนัะฐ) - ะพัะบัััั ะบะตะนั.
๐น ยป ะััะถะธะต - ัะฟะธัะพะบ ะฒะฐัะตะณะพ ะพััะถะธั.
๐น ยป ะัะพะดะฐัั ID - ะฟัะพะดะฐัั ะพััะถะธะต.
๐น ยป ะัะฑัะฐัั ID - ะฒะทััั ะฒ ััะบะธ ะพััะถะธะต.
 
๐ฐ ะะผััะตััะฒะพ:
๐น ยป ะะฐัะธะฝั - ัะฟะธัะพะบ ะผะฐัะธะฝ.
๐น ยป ะะฐัะธะฝะฐ ID - ะบัะฟะธัั.
๐น ยป ะะธะทะฝะตัั - ัะฟะธัะพะบ ะฑะธะทะฝะตัะพะฒ.
๐น ยป ะะธะทะฝะตั ะบัะฟะธัั ID - ะบัะฟะธัั.
๐น ยป ะขะตะปะตัะพะฝั - ัะฟะธัะพะบ ัะตะปะตัะพะฝะพะฒ.
๐น ยป ะขะตะปะตัะพะฝ ID - ะบัะฟะธัั ัะตะปะตัะพะฝ.
๐น ยป ะะฐะฑะพัั - ัะฟะธัะพะบ ัะฐะฑะพั.
๐น ยป ะฃัััะพะธัััั - ะฝะฐ ัะฐะฑะพัั.
๐น ยป ะฃะฒะพะปะธัััั - ั ัะฐะฑะพัั.

๐ณ ะะฐะฝะบ :
๐น ยป ะะฐััะฐ - ัะพะทะดะฐัั ะบะฐััั.
๐น ยป ะกะฝััั <ััะผะผะฐ> - ัะฝััั ั ะบะฐััั. 	
	`);
}

//ััะพะฑั ัะดะตะปะฐัั, ะฝะฐะฟัะธะผะตั, ะดะพะฑะฐะฒะปะตะฝะธะต ะฒ ะดััะทัั, ะฝะฐะดะพ ะดะปั ะฝะฐัะฐะปะฐ ะทะฐะนัะธ ะฒ ะผะตัะพะดั ะฒะบ https://vk.com/dev/methods ัะฐะผ ะฝะฐะนัะธ https://vk.com/dev/friends.add. ะขะฐะผ ะผั ะฒะธะดะธะผ ะฟะฐัะฐะผะตััั. ะัะปะธ ะฒั ัะพัะธัะต ััะพะฑั ะฑะพั ะฟัะพััะพ ะดะพะฑะฐะฒะธะป ะฒ ะดััะทัั, ัะพ ะฟะธัะตะผ ัะพะปัะบะพ user_id:

if(body[0] == '/add') {
vk.api.call('friends.add', { user_id: body[1] }); //ะฐ ัะตะฟะตัั ะฟะพััะฝัั - vk.api.call('ะฒ ะฝะธั ะผั ะฟะธัะตะผ "ะฝะฐะทะฒะฐะฝะธะต ะผะตัะพะดะฐ". ะะฝ ะฝะฐัะพะดะธััั ัะฒะตััั (ัะฐะผ ัะฐะบ ะถะธัะฝะพ ะฒัะดะตะปะตะฝะพ ะบะฐัะพัะต).
// ะฟะพัะปะต { ะผั ะฟะธัะตะผ ะฟะฐัะฐะผะตััั. ะะต ะพะฑัะทะฐัะตะปัะฝะพ ัะบะฐะทัะฒะฐัั ะฒัะต, ะบะพัะพััะต ะฝะฐะฟะธัะฐะฝั ะฒ ะฐะฟะธ ะผะตัะพะดะฐั.
// body[1] - ััะพ ะฟะตัะฒะพะต ัะปะพะฒะพ, ะบะพัะพัะพะต ะธะดะตั ะฟะพัะปะต ะบะพะผะฐะฝะดั(ั.ะต. /daun da (da - body[1])
}

//ะฟัะธะผะตั ั ัะตะบััะพะผ:

if(body[0] == '/message') {
	let userid = body[1]; //let - ััะพ ะพะดะฝะพัะฐะทะพะฒะฐั ะฟะตัะตะผะตะฝะฝะฐั
	body.shift(); //ะฑะพั ะพััััะฟะฐะตั (ะธะณะฝะพัะธััะตั) body[0]
	body.shift(); //ะฑะพั ะพััััะฟะฐะตั (ะธะณะฝะพัะธััะตั) body[1]
	let pmessage = body.map(e=>e).join(" "); //ะฑะพั ะทะฐัะฒะฐััะฒะฐะตั ะฒ ะพะดะฝะพัะฐะทะพะฒัั ะฟะตัะตะผะตะฝะฝัั ะฒะตัั ัะตะบัั, ะบะพัะพััะน ะธะดะตั ะฟะพัะปะต body[012] (ั.ะต. /message 1 ะณะพะฒะฝะพ ะถะพะฟะฐ - ะฒะพ ะฒัะตะผะตะฝะฝะพะน ะฟะตัะตะผะตะฝะฝะพะน ะฑัะดะตั "ะณะพะฒะฝะพ ะถะพะฟะฐ"
	vk.api.messages.send({ user_id: userid, message: pmessage });
	return message.send("ะัะฟัะฐะฒะธะป ัะพะพะฑัะตะฝะธะต *id"+userid +" (ะตะผั).");
	
	//p.s. ะตัะปะธ ะผั ัะดะตะปะฐะตะผ let pmessage = body[2] ัะพ ะพัะฟัะฒะฐะธััั ะพะดะฝะพ ัะปะพะฒะพ, ั.ะบ. ะฑะพะดะธ 2 ััะพ 3 ัััะพะบะฐ, ะฝั ัั ะฟะพะฝัะป)
}

// ะบะฐะบ ะดะตะปะฐัั ะบะพะผะฐะฝะดั ะดะปั ะฐะดะผะธะฝะพะฒ? ะั ัะพะทะดะฐะผ ัะฐะนะป ะฒ ัะพัะผะฐัะต .json ะณะดะต ะฑัะดะตั ัะฐะบะพะน ัะตะบัั:
// [
// ะฒะฐั ะธะด
// ]
// ะดะฐะปะตะต, ะผั ะดะพะปะถะฝั ะตะต ะธะผะฟะพััะธัะพะฒะฐัั, ะดะปั ัััะพะณะพ ะธะดะตะผ ะฒะฒะตัั ะธ ะฟะธัะตะผ var admins = require('./admins.json'); (ัะฒะตััั ะฝะฐะนะดะตัั, ั ัะฐะผ ะทะฐะบะพะผะตะฝัะธะป).

if(body[0] == '/admin') {
	ะฟะธัะตะผ: if(!~admins.indexOf(message.user)) return; //ะตัะปะธ ะตะณะพ ะฝะตั, ัะพ ะฝะธัะพ ะฝะต ะฑัะดะตั. ะะปั ัะตะบััะฐะปัะฝะพััะธ, ะผะพะถะฝะพ: if(!~admins.indexOf(message.user)) return message.send("[ERROR] ะั ะฝะต ะฐะดะผะธะฝะธัััะฐัะพั");
	//message.user - ััะพ ะฐะนะดะธ ะธะฟะพะปัะทะพะฒะฐัะตะปั, ะบะพัะพััะน ะพะฑัะฐัะธะปัั ะบ ะบะพะผะฐะฝะดะต
	message.send("ัั ะฐะดะผะธะฝ");
}

//ัะฐ ะฟะพะบะฐะถั ะฟัะธะผะตั ั ะบะตะนัะฐะผะธ
if(body[0] == '/ะฑัะดััะตะต') {
    switch(getRandomInt(1, 4)){ //ะผั ะดะตะปะฐะตะผ ัะฐะฝะดะพะผะฝัะน ะฒัะฑะพั ะธะท 4 ะบะตะนัะพะฒ
        case 1:
            message.reply("ั ัะตะฑั ะตะณะพ ะฝะตั");
        break;
        case 2:
            message.reply("ะผััะพัะบะฐ")
        break;
        case 3:
             message.reply("ะดะตัะดะพะผ")
        break;
         case 4:
            message.reply("ั ะตะฑั ััะพะปะธ ั ะถะตะปะตะทะพ ะตะฑะฐะฝะฝะพะต))")
        break;
    }
}

//ะฒัะต, ั ะฒะฐะผ ะฟะพะทะฝะฐะป ะฑะฐะทั ั ะบะพัะพัะพะน ะฒั ะผะพะถะตัะต ัะฐะทะฒะธะฒะฐัััั, ัะดะฐัะธ!

if(body[0] == '/test') {
return message.send(`ัะฐะฑะพัะฐั!`);
}
})
}
////////////////////////////////////////////////////////////////////////////////////////////// ะฐ ััั ะบะพะฝะตั


function getRandomInt(min, max){return Math.round(Math.random() * (max - min)) + min};
Array.prototype.random = function(){return this[Math.floor(this.length * Math.random())];}
Array.prototype.find = function (element) {return this.indexOf(element) == -1?false:true}
Array.prototype.return = (count) => slice(0, count)
